<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions</title>
    <link href="../css/navBarStyle.css" rel="stylesheet" type="text/css" >
    <link href="../css/transactionStyle.css" rel="stylesheet" type="text/css" >
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js" type="text/javascript"></script>

    <script src="../js/transactions.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lato&display=swap');
    </style>
</head>
<body>
{{> navBar}}

<div id="transact_box">
    <form method="get" action="/addTransaction">
        <button id = "link_addTransact" type = "submit">+ Add Transaction</button>
    </form>
    <h1 id="label_transact" style = "z-index: -1;">Transactions</h1>
    <!-- {{!-- search elements (low priority)
    <div id="searchTransact_box">
        <form action="#">
            <input id="input_searchTransact" type="text" placeholder="Filter transactions by date" name="search_transact">
            <button id="btn_searchTransact" type="submit"><img class="search_icon" src="../images/search_black.png"></button>
        </form>
    </div> --}} -->
    <div id="transactTable_box">
        <table id="transact_table">
            <thead>
                <tr id="transactTable_header">
                    <th class="transactTable_head sortable">
                        <form method="get" action="/sortBy">
                            <button class="filter_button" type="submit" value="" name="filter_status" id="filter_status">Status</button>
                        </form>
                    </th>
                    <th class="transactTable_head sortable">
                        <form method="get" action="/sortBy">
                            <button class="filter_button" type="submit" value="" name="filter_date" id="filter_date">Date<br>(MM-DD-YYYY)</button>
                        </form>
                    </th>
                    <th class="transactTable_head sortable">
                        <form method="get" action="/sortBy">
                            <button class="filter_button" type="submit" value="" name="filter_deliveryNo" id="filter_deliveryNo">Delivery Receipt No.</button>
                        </form>
                    </th>
                    <th class="transactTable_head sortable">
                        <form method="get" action="/sortBy">
                            <button class="filter_button" type="submit" value="" name="filter_salesNo" id="filter_salesNo">Sales Invoice No.</button>
                        </form>
                    </th>
                    <th class="transactTable_head sortable">
                        <form method="get" action="/sortBy">
                            <button class="filter_button" type="submit" value="" name="filter_customerName" id="filter_customerName">Customer Name</button>
                        </form>
                    </th>

                    <th class="transactTable_head non_sortable">More Info</th>
                    <th class="transactTable_head non_sortable">Edit</th>
                    <th class="transactTable_head non_sortable">Cancel</th>
                </tr>
            </thead>
            
            {{#each (reverseArray u.transactionsArray)}}
            <tbody>
                <tr class="transactTable_rows">
                    <td class="transact_item">{{this.status}}</td>
                    <td class="transact_item">{{this.dateString}}</td>
                    <td class="transact_item">{{this.deliveryNumber}}</td>
                    <td class="transact_item">{{this.invoiceNumber}}</td>
                    <td class="transact_item">{{this.customerName}}</td>
                    <td>
                        {{!-- button for more info --}}
                        <form method="get" action="/viewTransaction">
                            <button style = "border: 0px; background-color: transparent;" type="submit" value = "{{this.transactionId}}" name = "redirect_button" class = "btn_transact">
                               <img src="../images/redirect.png"  class="link_icons" id="redirect_icon" value = "{{this.transactionId}}">
                            </button>
                        </form>
                    </td>
                    <td>
                        <form method="get" action="/editTransaction">
                            <button style = "border: 0px; background-color: transparent;" type="submit" value = "{{this.transactionId}}" name = "edit_button" class = "edit_transact">
                                <img src="../images/edit.png"  class="link_icons" id="edit_icon" value = "{{this.transactionId}}">
                            </button>
                        </form>
                    </td>
                    <td>
                        <button style = "border: 0px; background-color: transparent;" type="submit" value = "{{this.transactionId}}" name = "cancel_button" class = "cancel_transact">
                            <img src="../images/delete.png"  class="link_icons" id="cancel_icon" value = "{{this.transactionId}}">
                        </button>
                    </td>
                </tr>
            </tbody>
            {{/each}}
        </table>
    </div>
</div>
    
</body>
</html>
